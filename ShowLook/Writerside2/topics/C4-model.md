# C4 model

## Level 2

```mermaid
C4Context
title ShowLook Architecture
Enterprise_Boundary(b0, "ShowLook System"){
Person(customerA, "User", "A user that rate outfits")
Person(customerB, "Admin", "Can check the dataset of outfits, check the diagrams of AI")
Boundary(b1, "Frontend") {
Container(System, "Microservices application", "JavaScript, React", "Delivers page content by React")
Container(SystemA, "Frontend System", "JavaScript, React", "Allows users to create picked outfit from the AI and give feedback about them")
}
Boundary(b2, "Backend Application") {
Container(SystemB, "Asp.Net System", "C#, Asp.Net", "Sending the outfits generated by AI, getting information about feedback, sending request to save it in database, getting new models")
Container(SystemC, "Fast Api System", "Python, Fast Api","Getting data from database, train, and sending new models of AI")
}

Boundary(b3, "databases"){
ContainerDb(db1, "outfit database" "Apache Casandra", "stores data about outfits.")
ContainerDb(db2, "clothes image database", "MinIO", "stores the images of clothes.")
ContainerDb(db3, "Data database", "Postgres", "stores data about ML and data analysis information.")
}
}
Rel(customerA, System, "See our website using")
Rel(customerB, System, "See our website using")
Rel(System, SystemA, "Delivers the web content")
Rel(SystemA, SystemB, "makes API calls")
Rel(SystemB, SystemC, "making API calls when generation ends")
BiRel(SystemB, db1, "saving and getting outfits data, clothes images urls")
BiRel(SystemA, db2, "getting the clothes images")
BiRel(SystemA, db3, "getting information and saves it")
BiRel(SystemC, db3, "writes information about ML models")

UpdateRelStyle(customerA, System, $textColor="black", $offsetX="-50")
UpdateRelStyle(customerB, System, $textColor="black", $offsetX="-30")
UpdateRelStyle(System, SystemA, $textColor="black", $offsetX="-80", $offsetY="-10")
UpdateRelStyle(SystemA, SystemB, $textColor="black", $offsetX="-70", $offsetY="-10")
UpdateRelStyle(SystemB, SystemC, $textColor="black", $offsetX="-90")
UpdateRelStyle(SystemB, db1, $textColor="black", $offsetY="100", $offsetX="-250")
UpdateRelStyle(SystemA, db2, $textColor="black", $offsetX="-50")
UpdateRelStyle(SystemA, db3, $textColor="black", $offsetX="-50")
UpdateRelStyle(SystemC, db3, $textColor="black", $offsetX="-50")

```

[mermaid documentation link](https://mermaid.ink/img/pako:eNqlVttu2zgQ_RWC24cUUA3Jl_gC7IOstAsvmm5Qo0BbCChoaWwTkUgtScX1Bvn3DinJlmrX2ewCeXComTNnzpyh9EgTmQKd0WgYSWHgu4mF4SYDstzK3Xsp70moki03kJhSQSzeYpAqFNfwbS5LkTK1v1r5HonpIWG51wbymL5-jMUdKC3FVVJqI3NQoQ38pEHF1P4KSYm_idkyQxQzQGRp1txozD1JnbuENOeiyo2YIMkWkntMB5IywzQYItcNhtd-ytlGsVzbx-HCoR_JBxbtnbLdixSfEaRttWBcgLqqmrEhtzxREuk-8AQ0YUWR8YQZLms-f7IHtkwUL4xHPgJLTHV8Axl_wE5IwTZAElfFkNW-iXl9WixsEzqoeaFGmGVyp52WmhhJFFgtC57cQ1rLQdZK5k6LcEEYwm6QFVkDpCuGIrEVhtnHuWP01Nanb0vMMcqyCdttn5WqmpMueh9wHG3y0W8eqc-rgyUCcrFxrOqhkQ0gErJPrUThwsMDY2wQF2upcle4ZtuQ94iugRT8XYI2VgLNsD1smwtnjRWa44glYEdytH2mz-ofOf0ZAoUF77RwtzdbKTzSPMTTmP5Ro9o6lczHikYhsOcEb0gei7fciIK3JR_YYg2KrjbpwPJmdZVWpq1H2wTG1CpfMPQ9iZjGoopVvHGDFHrWMazEq_XudQVw0G7eSSZxLJrw3Nr2WKFaBLH4qwNsJ-giXU917jls19iNpdGFvJPabJRt9Tzd2_dOw-pEsGyvuW5boteoiH8fIWvfN8cFXoL1mSI7WGm80HBfcB4usZ0y__cpTVxrbQ_rbiXBrGbjf8o58HLbkrN7bDe8W5CEZbUpj7EHQlEda110CCa7LYhmbexyoM0qhDnvYNSewcWw-e4KqI3b7J5V1yOdyeOlorJTuNDCOZ80GLbdbub5pEE7qbPTdkVwaTHdnKRGh9SdwjF0Rq-PFmntdCw-FdgPIMbS7DM454hX9nUXyUyq32O6yvAqsfZ7JddrfJN8xrM3I9-B_QJq_hKowVmoEwc9DzTxWydf7ElwAbpttOexxy_CbhvzeezpZSRnz4solk_g-z_j9keX23dG_a-j7jr3_6FEL0OhHkWP5Yyn-HWG9z9B99sXNN6YM_d2UJiHFx7GsdLI5V4kdGZUCR4tXfmb6qOHztYsw3cRLZj4KmXeBOG_dPZIv9PZm8Houjfw-6NJMJ6MA3869Ogej_vDoDfpXw-vg_E0mE77_SeP_uMQgt7In_j-MBiPg2t_PJoOPAopx2v7tvqadB-VTz8A8wKFtA?type=png)
## Level 3

### frontend

```mermaid
C4Context
title ShowLook Architecture Backend

Component(SystemA, "Asp.Net System", "C#, .Net", "Sending the outfits generated by AI, getting information about feedback, sending request to save it in database, getting new models")

Container_Boundary(b1, "Frontend System") {
    Component(ComponentOutfitView, "Outfit View", "View", "show outfit")
    Component(ComponentOutfitService, "Outfit Service", "Controller", "Getting from backend outfits")
    Component(ComponentAdminFormView, "Admin Form View", "View", "Form where admin can log in")
    Component(ComponentAdminFormService, "Admin Form Service", "Service", "Getting information about correct credentials")
    Component(ComponentAdminView, "Admin View", "View", "Showing user information about models, generations")
    Component(ComponentAdminService, "Admin Service", "Service", "Getting information about models, generations")
    Component(ComponentAdminStore, "Admin Store", "Store", "Storing data that was get from backend")
}

Boundary(b3, "databases"){
    ContainerDb(db1, "clothes database" "Apache Casandra", "stores data about clothes.")
    ContainerDb(db2, "clothes image database", "MinIO", "stores the images of clothes.")
    ContainerDb(db3, "Data database", "Postgres", "stores data about ML models and data analysis information")
}

Rel(ComponentOutfitView, ComponentOutfitService, "Uses")
Rel(ComponentOutfitService, SystemA, "making API requests")
Rel(ComponentOutfitService, db2, "read from by url")
Rel(ComponentAdminFormView, ComponentAdminFormService, "Uses")
Rel(ComponentAdminFormService, SystemA, "making API requests")
Rel(ComponentAdminFormService, ComponentAdminStore, "Uses")
Rel(ComponentAdminView, ComponentAdminService, "Uses")
Rel(ComponentAdminService, SystemA, "making API requests")
Rel(ComponentAdminService, ComponentAdminStore, "Uses")
Rel(SystemA, db1, "Reads from, writes to")
Rel(SystemA, db3, "Reads from, writes to")

UpdateRelStyle(ComponentOutfitView, ComponentOutfitService, $textColor="black", $offsetX="-20")
UpdateRelStyle(ComponentOutfitService, SystemA, $textColor="black", $offsetX="-60")
UpdateRelStyle(ComponentOutfitService, db2, $textColor="black", $offsetX="-100")
UpdateRelStyle(ComponentAdminFormView, ComponentAdminFormService, $textColor="black", $offsetX="20")
UpdateRelStyle(ComponentAdminFormService, SystemA, $textColor="black", $offsetX="-70", $offsetY="-30")
UpdateRelStyle(ComponentAdminFormService, ComponentAdminStore, $textColor="black", $offsetX="-40")
UpdateRelStyle(ComponentAdminView, ComponentAdminService, $textColor="black", $offsetX="10")
UpdateRelStyle(ComponentAdminService, SystemA, $textColor="black", $offsetX="-80", $offsetY="20")
UpdateRelStyle(ComponentAdminService, ComponentAdminStore, $textColor="black", $offsetX="-10")
UpdateRelStyle(SystemA, db1, $textColor="black", $offsetX="-110")
UpdateRelStyle(SystemA, db3, $textColor="black", $offsetX="-120", $offsetY="30")
```

[mermaid documentation link](https://mermaid.ink/img/pako:eNqlV11v2jAU_SuW14dWyhAhfEt7YFSrKq3bNNRpmyJNJrmA1cRmtjOaVf3vu04ChJISYDzhm-tz7rkfdvJEAxkCHdJxeyyFgUfjC8NNBGSykKuPUj6QkQoW3EBgEgXkPQseQIS-8MVYxkspQJjLSaoNxCOH-HSkl41PYEhu8qm1jd84xBrz1QS3czEnZgFEJmbGjSZzEKCYgZBMUzK6ddBgjHXiYiZVzAyXgrApupMZQDjFIByiCyAFvxPQhhhJNPsDhBvcRkJm2JRp2GIJWJEYxUbap1e5AGEYR-Zf72UiQqbSy6lrQ_ygbCpEuFFxRZ58QfC31bz59znT8I3Dym7NV8Quc7nbfxoTWijOAjiINwH1hwdQgiwsRUoxQCWjCFS-vik0zpSMyTSv0Tq7h8hGYczFB0zxOv7MQKylUkP2YLUA7ASWeQZMkEjaQh1FU5JVYtqRtrO4ebUPAqkU9iQJFITIwFlUL3RXZJU-2_SWL9GgKkjz9nHW_YoP6kn3JJ-j9ixiI1WZ1i4L0t2_ltKOC44kM2TF7DyanVbKuJ7tzGwnxbPb11Nmo9mMSDFV19PLMJ-nIJI47Xozkz61US1ZgEfAmGkmQsWKGbGR5Y7rOud7GyW5ZfxWGZ_HbA4lFvvsjovbzzvg9uDJPDWRszr8TOW1DWcX9ovUZq6s7uqw7z4WNSOornggWJRqrsvl3Sb2K0TVZ8rrB8N9nvfKvRu30tkcswdb6tGX2_WZWb-9yLACFhYdkZJERfv7XpwkB0e_OvB9z1Nj30d4ZSIOBFAV_nGh_1_YJ4W8YSgG7CuWR2f1cchK4WWNXS6rvL3D3r64X2KvAu6amDSC0zrywr4-jGUk1TufTiM8Oux0XMjZTIP5jra3rWZGc5hkP4_1wN2TgLOmrgd1m4dRj2_5Wq7WkUzn5KbXLFl-WIt3KltlT9Yzt4_gOThvtRTuEQzn5Kz_MmetU4jOTFe1mN1ZPwKlFsY7Cqb1MgVF11CHxoDXFw_xqyG7832KN2iMF-MweyNQiIWXGvqxxMhJKgI6NCoBhyZZSNeczRWL6XCG72xoXTLxU8p47YRLOnyij3T4tt1veN1-p9Md9Lqe2_e6Dk3p0HW7jV6r1-14nabXdnuD3rND_2YIzUa_33Hbbrs1GHj9dqszcCiEHAtwl3_lZB87z_8Afkl73g?type=png)

### backend

```mermaid
C4Context
title ShowLook Architecture Backend
Component(SystemA, "Frontend System", "JavaScript, React", "Allows users to create picked outfit from the AI and give feedback about them")

Container_Boundary(b1, "Asp.Net System") {
    Component(ComponentOutfitController, "Outfit Rate Controller", "Controller", "allows users to send the rate of the outfit")
    Component(ComponentDataController, "Data Analysis Controller", "Controller", "allows users to get data, generate charts, checking outfits rates")
    Component(ComponentAdminFormController, "Admin Form Controller", "Controller", "allows admins to log in")
    Component(ComponentOutfitService, "Outfit Service", "Service","saving the score of the model into database, generating new outfits")
    Component(ComponentDataService, "Data Analysis Service", "Service", "Making charts, analyze data")
    Component(ComponentAdminFormService, "Admin Form Service", "Service", "checking credentials for users")
    Component(ComponentDataRepository, "Data Repository", "Repository", "Saving data about model")
    Component(ComponentAdminRepository, "Admin Repository", Repository, "Getting credentials of admin")
    Component(ComponentMiddleware, "Database Middleware", "Middleware", "Responsible for connection with database")
    Component(ComponentWorker, "AI Update Worker", "Worker", "When actual generation is over call API")
}

Container_Boundary(b2, "Fast Api System"){
    Component(ComponentGenerationController, "New Generation Controller", "Controller", "Create new generation")
    Component(ComponentGenerationService, "New Generation Service", "Service", "Create new generation entity in database")
    Component(ComponentModelsService, "Models Service", "Service","Create new models for generation")
    Component(ComponentDataRepositoryPy, "Data Repository", "Repository", "Saving data about generation and model")
}

Boundary(b3, "databases"){
    ContainerDb(db2, "clothes image database", "MinIO", "stores the images of clothes.")
    ContainerDb(db3, "Data database", "Postgres", "stores data about ML models and data analysis information and clothes.")
}

Rel(SystemA, db2, "Read from")
Rel(SystemA, ComponentOutfitController, "Makes Api Calls")
Rel(SystemA, ComponentDataController, "Makes Api Calls")
Rel(ComponentOutfitController, ComponentOutfitService, "Uses")
Rel(ComponentDataController, ComponentDataService, "Uses")
Rel(ComponentOutfitService, ComponentDataRepository, "Uses")
Rel(ComponentDataService, ComponentDataRepository, "Uses")
Rel(ComponentDataRepository, ComponentMiddleware, "Uses")
Rel(ComponentMiddleware, db3, "Writes to, read from")
Rel(ComponentWorker, ComponentGenerationController, "Making Api Calls")
Rel(ComponentGenerationController, ComponentGenerationService, "Uses")
Rel(ComponentGenerationController, ComponentModelsService, "Uses")
Rel(ComponentGenerationService, ComponentDataRepositoryPy, "Uses")
Rel(ComponentModelsService, ComponentDataRepositoryPy, "Uses")
Rel(ComponentDataRepositoryPy, db3, "Writes to, read from")
Rel(ComponentAdminFormController, ComponentAdminFormService, "Uses")
Rel(ComponentAdminFormService, ComponentAdminRepository, "Uses")
Rel(ComponentAdminRepository, ComponentMiddleware, "Uses")

UpdateRelStyle(SystemA, db2, $textColor="black", $offsetX="-50", $offsetY="-20")
UpdateRelStyle(SystemA, ComponentOutfitController, $textColor="black", $offsetX="-50", $offsetY="-20")
UpdateRelStyle(SystemA, ComponentDataController, $textColor="black", $offsetX="-100", $offsetY="-20")
UpdateRelStyle(ComponentOutfitController, ComponentOutfitService, $textColor="black", $offsetX="-50", $offsetY="-20")
UpdateRelStyle(ComponentDataController, ComponentDataService, $textColor="black", $offsetX="140", $offsetY="-100")
UpdateRelStyle(ComponentOutfitService, ComponentDataRepository, $textColor="black")
UpdateRelStyle(ComponentDataService, ComponentDataRepository, $textColor="black", $offsetX="-180")
UpdateRelStyle(ComponentDataRepository, ComponentMiddleware, $textColor="black", $offsetX="-15")
UpdateRelStyle(ComponentMiddleware, db3, $textColor="black", $offsetX="-65")
UpdateRelStyle(ComponentWorker, ComponentGenerationController, $textColor="black", $offsetX="-95")
UpdateRelStyle(ComponentGenerationController, ComponentGenerationService, $textColor="black", $offsetX="-15")
UpdateRelStyle(ComponentGenerationController, ComponentModelsService, $textColor="black", $offsetY="100", $offsetX="-15")
UpdateRelStyle(ComponentGenerationService, ComponentDataRepositoryPy, $textColor="black", $offsetY="-80", $offsetX="-15")
UpdateRelStyle(ComponentModelsService, ComponentDataRepositoryPy, $textColor="black",  $offsetX="-15")
UpdateRelStyle(ComponentDataRepositoryPy, db3, $textColor="black")
UpdateRelStyle(ComponentAdminFormController, ComponentAdminFormService, $textColor="black", $offsetX="-50", $offsetY="-10")
UpdateRelStyle(ComponentAdminFormService, ComponentAdminRepository, $textColor="black")
UpdateRelStyle(ComponentAdminRepository, ComponentMiddleware, $textColor="black")

```
[mermaid documentation](https://mermaid.ink/img/pako:eNq1WFtvGjkU_iuW1YdEItEAIQSkfaBErbIqbRRUdXeFtDIzBqzM2Mg2pDTKf--xDXODuZHdvGTmjH2-79xtXrEvAoqHeHwzFlzTn3rGNdMhRdOVePkixDMaSX_FNPX1RlL0kfjPlAczPhbRWnDK9cV0pzSNRi00w5-k0cED5GQzbIR_ki2Z-pKtdQs9UeJrJx6FoXhRaKOoVEgL5EtKNEVrBgABEhu9YBotpIiQXlE0ekAE9C7ZlqIFpcEceCAyh2XmMyBdzrghxTVhnMp_P4oND4jcXczbFkytr79SHfO6RK8zjuAvMSN--mahjSopwpBKs9_J0JNhmHxxhuTfSc4wZRxibJBmt1jYZ2efpV1A455okiVhJGjESbhTTDWmsQTzA9DQgifwkOHir4jUqgX_qf_M-HLPSlmmqozcKIgY_yRklGVoxcjI69IjZoflF4olYrwM1AVhSuWW-TQVlb3E6U1eZliRrbHK-Fv5QsbOjyDlQwADVOOROVE09orZwOnLwRVVEUqxyYangBS8TIj19cH5xOz4RS2TWi5PQab8XYwXRxcqLABFjIQKLYR0qVFl4BNdC8W0kLvYxkTkAPLvU-d2Y9C-RK3DK43LQjnbsrqzKz5TrfN2QYRtSpWBTVgQhPSFyDhsJgNQIt7HKff-RBXsV2wOzdG4zxecQ1dkgqMXpldxKpVB_xDyeV8qD-j7OjBV6GQOI_O8ohxBu9yQME5OwILcElsK8FBBaPT4YOHeirpfx7ZlojQarVnS_oq73-cYKVvaX6Emkm-V5T123dxUUsK9zDOJ7lR-50CLc_wkHDJJoXdQ6LViMzFJqlLoTlDcXlKgkVtq0qKeudnSenxPcaUMNiMyqTWbFEkqdM32gyNUOgn2aXM_vwhcwvihgD6pEIvIkqac58qCP3xzjwpowSrTUu1KW377vdcp69P6u7GlWbWPQumlNLxSmlNWTr4cnGyMdB8OvZZxcHyUuCBDwXrhiYbJOWVvJJxFAnvAsMsyK0rPAtC_gZoppzGUoCrZfTzCi_aWABaPv--KntCQBy0aV6d350BKRkEx-vt2p9cVtOzTm9Nr9nn2Q8LB1ZwuWkgeRfuoKVf2wP3kLgnf6Z3lTe60NRWajppVlZaqoDyWhCUHdoaG45WNInTyuFl6MjpN43hl2QmkREeTJJ1xN-hBy1TvQpprRB_MpWssQiH_mOF5CPca0wI_iMVCUf0XyK56Xkryt5F0PKu5SG9JN_k_0fKdpxqr7dUEO6M__neWNmytlcDtmyNg64hKs6sb6ynsCoPOU5qL41214ypLpgZMrxTlaABUa7wt11hzMlTjDMpxmo-Ndzur2XwphTMZnK3kZgTqDJZKAld3TQnUn2qnwZtgFcy_huXadAye0wLbXj0KNSboOdad1SUucQtHFG4ALMBDbK81M2x-FoS7xdBeeiSsgqsArCMbLaY77uOhlhvawhvL5p6RpSQRHi5IqEC6JvwfIaLDInjFw1f8Ew-vev3ru0HvttvvtTsdr-91W3gH4u5t-3rgdfp9bzC49Qbw-a2Ff1kV7evuYNDt3PS7Xrtz6930Oi1MA2PjxP30an-BffsNNGKcuw?type=png)
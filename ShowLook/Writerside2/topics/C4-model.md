# C4 model

## Level 2

```mermaid
C4Context
title ShowLook Architecture
Enterprise_Boundary(b0, "ShowLook System"){
Person(customerA, "User", "A user that rate outfits")
Person(customerB, "Admin", "Can check the dataset of outfits, check the diagrams of AI")
Boundary(b1, "Frontend") {
Container(System, "Microservices application", "JavaScript, React", "Delivers page content by React")
Container(SystemA, "Frontend System", "JavaScript, React", "Allows users to create picked outfit from the AI and give feedback about them")
}
Boundary(b2, "Backend Application") {
Container(SystemB, "Asp.Net System", "C#, Asp.Net", "Sending the outfits generated by AI, getting information about feedback, sending request to save it in database, getting new models")
Container(SystemC, "Fast Api System", "Python, Fast Api","Getting data from database, train, and sending new models of AI")
}

Boundary(b3, "databases"){
ContainerDb(db1, "outfit database" "Apache Casandra", "stores data about outfits.")
ContainerDb(db2, "clothes image database", "MinIO", "stores the images of clothes.")
ContainerDb(db3, "Data database", "Postgres", "stores data about ML and data analysis information.")
}
}
Rel(customerA, System, "See our website using")
Rel(customerB, System, "See our website using")
Rel(System, SystemA, "Delivers the web content")
Rel(SystemA, SystemB, "makes API calls")
Rel(SystemB, SystemC, "making API calls when generation ends")
BiRel(SystemB, db1, "saving and getting outfits data, clothes images urls")
BiRel(SystemA, db2, "getting the clothes images")
BiRel(SystemA, db3, "getting information and saves it")
BiRel(SystemC, db3, "writes information about ML models")

UpdateRelStyle(customerA, System, $textColor="black", $offsetX="-50")
UpdateRelStyle(customerB, System, $textColor="black", $offsetX="-30")
UpdateRelStyle(System, SystemA, $textColor="black", $offsetX="-80", $offsetY="-10")
UpdateRelStyle(SystemA, SystemB, $textColor="black", $offsetX="-70", $offsetY="-10")
UpdateRelStyle(SystemB, SystemC, $textColor="black", $offsetX="-90")
UpdateRelStyle(SystemB, db1, $textColor="black", $offsetY="100", $offsetX="-250")
UpdateRelStyle(SystemA, db2, $textColor="black", $offsetX="-50")
UpdateRelStyle(SystemA, db3, $textColor="black", $offsetX="-50")
UpdateRelStyle(SystemC, db3, $textColor="black", $offsetX="-50")

```

[mermaid documentation link](https://mermaid.ink/img/pako:eNqlVttu2zgQ_RWC24cUUA3Jl_gC7IOstAsvmm5Qo0BbCChoaWwTkUgtScX1Bvn3DinJlmrX2ewCeXComTNnzpyh9EgTmQKd0WgYSWHgu4mF4SYDstzK3Xsp70moki03kJhSQSzeYpAqFNfwbS5LkTK1v1r5HonpIWG51wbymL5-jMUdKC3FVVJqI3NQoQ38pEHF1P4KSYm_idkyQxQzQGRp1txozD1JnbuENOeiyo2YIMkWkntMB5IywzQYItcNhtd-ytlGsVzbx-HCoR_JBxbtnbLdixSfEaRttWBcgLqqmrEhtzxREuk-8AQ0YUWR8YQZLms-f7IHtkwUL4xHPgJLTHV8Axl_wE5IwTZAElfFkNW-iXl9WixsEzqoeaFGmGVyp52WmhhJFFgtC57cQ1rLQdZK5k6LcEEYwm6QFVkDpCuGIrEVhtnHuWP01Nanb0vMMcqyCdttn5WqmpMueh9wHG3y0W8eqc-rgyUCcrFxrOqhkQ0gErJPrUThwsMDY2wQF2upcle4ZtuQ94iugRT8XYI2VgLNsD1smwtnjRWa44glYEdytH2mz-ofOf0ZAoUF77RwtzdbKTzSPMTTmP5Ro9o6lczHikYhsOcEb0gei7fciIK3JR_YYg2KrjbpwPJmdZVWpq1H2wTG1CpfMPQ9iZjGoopVvHGDFHrWMazEq_XudQVw0G7eSSZxLJrw3Nr2WKFaBLH4qwNsJ-giXU917jls19iNpdGFvJPabJRt9Tzd2_dOw-pEsGyvuW5boteoiH8fIWvfN8cFXoL1mSI7WGm80HBfcB4usZ0y__cpTVxrbQ_rbiXBrGbjf8o58HLbkrN7bDe8W5CEZbUpj7EHQlEda110CCa7LYhmbexyoM0qhDnvYNSewcWw-e4KqI3b7J5V1yOdyeOlorJTuNDCOZ80GLbdbub5pEE7qbPTdkVwaTHdnKRGh9SdwjF0Rq-PFmntdCw-FdgPIMbS7DM454hX9nUXyUyq32O6yvAqsfZ7JddrfJN8xrM3I9-B_QJq_hKowVmoEwc9DzTxWydf7ElwAbpttOexxy_CbhvzeezpZSRnz4solk_g-z_j9keX23dG_a-j7jr3_6FEL0OhHkWP5Yyn-HWG9z9B99sXNN6YM_d2UJiHFx7GsdLI5V4kdGZUCR4tXfmb6qOHztYsw3cRLZj4KmXeBOG_dPZIv9PZm8Houjfw-6NJMJ6MA3869Ogej_vDoDfpXw-vg_E0mE77_SeP_uMQgt7In_j-MBiPg2t_PJoOPAopx2v7tvqadB-VTz8A8wKFtA?type=png)
## Level 3

### frontend

work in progress

### backend

```mermaid
C4Context
title ShowLook Architecture Backend
Component(SystemA, "Frontend System", "JavaScript, React", "Allows users to create picked outfit from the AI and give feedback about them")

Container_Boundary(b1, "Asp.Net System") {
    Component(ComponentA, "Outfit Rate Controller", "Controller", "allows users to send the rate of the outfit")
    Component(ComponentB, "Data Analysis Controller", "Controller", "allows users to get data, generate charts, checking outfits rates")
    Component(ComponentC, "Outfit Service", "Service","saving the rate of the outfit into database, generating new outfits")
    Component(ComponentD, "Data Analysis Service", "Service", "Making charts, analyze data")
    Component(ComponentE, "Outfit Repository", "Repository", "getting, saving data of outfits")
    Component(ComponentF, "Database Middleware", "Middleware", "responsible for connection with database")
    Component(ComponentG, "AI Update Worker", "Worker", "allows to make new AI models every 24 hours")
}
Container_Boundary(b2, "Fast Api System"){
    Component(ComponentH, "New Model Generation Controller", "Controller", "Allows to generate new model and return it")
    Component(ComponentI, "Model Training Service", "Service", "Train new model")
    Component(ComponentJ, "Data Preparation Service", "Service", "Prepare data for new model and serve it as training and validation data")
    Component(ComponentK, "Outfit Repository", "Repository", "getting, saving data of outfits")
}

Boundary(b3, "databases"){
    ContainerDb(db1, "outfit database" "Apache Casandra", "stores data about outfits.")
    ContainerDb(db2, "clothes image database", "MinIO", "stores the images of clothes.")
    ContainerDb(db3, "Data database", "Postgres", "stores data about ML models and data analysis information")
}

Rel(SystemA, ComponentA, "Makes Api Calls")
Rel(SystemA, ComponentB, "Makes Api Calls")
Rel(SystemA, db2, "Getting images from the link")
Rel(ComponentA, ComponentC, "Uses")
Rel(ComponentB, ComponentD, "Uses")
Rel(ComponentC, ComponentE, "Uses")
Rel(ComponentD, ComponentE, "Uses")
Rel(ComponentE, ComponentF, "Uses")
Rel(ComponentF, db1, "Reads from and writes to")
Rel(ComponentG, ComponentH, "Makes Api Calls")
Rel(ComponentH, ComponentI, "Uses")
Rel(ComponentH, ComponentJ, "Uses")
Rel(ComponentJ, ComponentK, "Uses")
Rel(ComponentK, db1, "Reads from")
Rel(ComponentK, db2, "Reads from")
Rel(ComponentK, db3, "Writes to")
Rel(ComponentF, db3, "Read from and writes to")

UpdateRelStyle(SystemA, ComponentA, $textColor="black", $offsetX="-50", $offsetY="-20")
UpdateRelStyle(SystemA, ComponentB, $textColor="black", $offsetX="-100", $offsetY="-20")
UpdateRelStyle(SystemA, db2, $textColor="black", $offsetX="-50", $offsetY="300")
UpdateRelStyle(ComponentA, ComponentC, $textColor="black", $offsetX="-25")
UpdateRelStyle(ComponentB, ComponentD, $textColor="black", $offsetX="-20")
UpdateRelStyle(ComponentC, ComponentE, $textColor="black", $offsetX="-10")
UpdateRelStyle(ComponentD, ComponentE, $textColor="black", $offsetX="25")
UpdateRelStyle(ComponentE, ComponentF, $textColor="black", $offsetX="-15")
UpdateRelStyle(ComponentF, db1, $textColor="black", $offsetX="-70", $offsetY="50")
UpdateRelStyle(ComponentG, ComponentH, $textColor="black", $offsetX="-80")
UpdateRelStyle(ComponentH, ComponentI, $textColor="black", $offsetX="-15")
UpdateRelStyle(ComponentH, ComponentJ, $textColor="black", $offsetX="-20")
UpdateRelStyle(ComponentJ, ComponentK, $textColor="black")
UpdateRelStyle(ComponentK, db1, $textColor="black", $offsetX="90")
UpdateRelStyle(ComponentK, db2, $textColor="black", $offsetX="50")
UpdateRelStyle(ComponentF, db3, $textColor="black", $offsetX="-30")
UpdateRelStyle(ComponentK, db3, $textColor="black", $offsetX="80")
```
[mermaid documentation](https://mermaid.ink/img/pako:eNqtWG1v2kgQ_isrqx9SiUbhPUG6D7w0aZKmrcJFvTshnRZ7gBVmF-0uUBrlv3dmjY1xsHGuly_B9swzzzNvXnj2fBWA1_H6jb6SFn7YkbTChsCGM7X5rNScdbU_ExZ8u9LAetyfgwxGsq8WSyVB2rPh1lhYdCts5F1rwpABi-6NPLp5x9d86GuxtBX2CNy30e1uGKqNYSsD2jCrmAZugS0F4gdMrexEWDbRasHsDFj3lnGEnYo1sAlAMEYajI_RjB5joPcjSZyk5UKC_renVjLgens2rrpYZnn-BWxC6z17HkmGf3sVyScn5GsU_5EoEapWYQg6Ip695hkhhhJApDV5q4n7HAlyPHPi9ghrwC1nXcnDrRHmzZGnKDFAhAp-wixQeH_GtTUV_A_-XMjpjohx5EwRn34qD0PQa-FDFHV_MfIMXxPocbVMSCRFhMbcQEKKHCRsYiZFHAavc5JDBS8euBMYK-bk8RNc_KIYH9P1hqUywiq9jSCz15hgol9hO92ETZpLSLmOpVAu2IMIghA2XMfcM9caDLoZMcZBnCjNfCUlTqBQkm2EnSVJLYp44zr_lj0tLQ-AfVd6HjdO-vOuibBSCz4HVxl0WuBWCA2DNegtqzXYTK10pO_l-JzV3PxzY1l3KfaDlj9nn8jhC0Z7oFDsZtccqPBU23cTxkmbE2tH2a0JDbirJCuet1uXd-fzp0Y1VM_85nIm-zBFwHdJ037TsIxF5UOTFRY-aiYq9qEYHG5ceticHCXHROnBmociiMBP9fj9_9zjL7Rt97Wvk1_ckiZd9V2fDMZnQbSJd5th379UzyXH9cT63KAszSMaBhmBiaJHi35H4DwlNA3vGtAPFe4fw8SCTyEVJZoxefv1AJxWlbM0JHDnm4dfT8p6CPtNGTvVJPs47YfP8TBR0aIH8TITEuu9cDXc5_URwv079fC1hCsOwWnA-ji2US2Om_dKme-ydhOVPM5F8tYNhZwnTmkmhy-JJwPmtVkvZTbIN-unzD7mmw3KmX1MmV3nm12T9GrU_TzYKabybDSedGi1vPa5SUF_Kspu2upw2xwnkza7yze7S5nd55vdH5GWY1UrZeX6_nt-Xq4TI4LKS-VIPi2x9wFdh3YbwvEOf0cH0L4Klf5j5I1DPOTRVL1Tk4kB-xfe-9C8SN35m-7ULlyAk_C9MvDVi7fiuzT-B971i6O4eVN2OkKtWYiXGccSeMX8MnNbJrWFeIM34p2Qm1kEJegV48Ub4zRQO1vpZrHwzF45HeCyGC-zdX5beWY9_XbjZPbYMbwC7_uydbi6OI1TZnJPVC_efqfTUi9BqAyQK79X8RaAJwcR4Fd3d9oaefRFGM8kHXcW0-iG5wm04yurhlvpex2rV1DxVo7AQPCp5guvM-Ehfjfzllz-o9QiNsJLr_Ps_fA6H6qN9nm10WpeVauXrWat3mhUvC3eb9Rb55ftdvWqXWs1W7XmS8X76RCq581arYlPqs128-qq3kIHCOiE-RD91OB-cXj5BSa0mKc?type=png)
